## MVP QR Payments terminal

## Глоссарий
CRUD - Create, read, update, delete набор действия для управления сущностями.
Делается для каждой сущности свой.

## Общее
- [X] Установить Symfony 6.3
- [X] Настроить проект для начала работы
- [X] Установить фреймворк для тестирования
- [X] Настроить гексогональную структуру для проекта
- [X] Условие разработки строго TDD для слоев Application, Domain
- [X] Подготовка Dockerfile для работы локально и для использования на сервеерах в будущем
- [ ] Создать набор доменных сущностей (см раздел)
- [X] Забовый layout для отображения форм
- [X] Подключить bootstrap 5
- [X] Настроить шаблонизацию

### Stores
Данная сущность является магазином в рамках которго порихводятся оплаты.
- [X] Регистрация нового
- [X] Удаление существующего
- [X] Редактирование существующего
- [X] Шаблоны для управления CRUD
- [X] Добавление gateway к store 
- [X] Отсоединение gateway от store 

### Gateways
Сущность хранит в себе учетные данные для работы с QR терминалом на стороне банка.
- [X] Регистрация нового
- [X] Удаление существующего
- [X] Редактирование существующего
- [X] Шаблоны для управления CRUD

### Users
Сущность пользователя. Пользователь может быть администратором или менеджером определенного store. При этом администратору дается полное управление системой, а менеджер видит и может управлять только разоешенными ему сущностями.

- [X] Регистрация нового
- [X] Удаление существующего
- [X] Редактирование существующего
- [X] Шаблоны для управления CRUD
- [X] Добавление stores для пользователя

### Payments
Сущность платежа

- [ ] Facade: register
- [X] Facade: find all
- [X] Facade: find by role
- [ ] Facade: update status
- [ ] Facade: mark as successful
- [ ] Facade: mark as failure
- [ ] QR: generate qr
- [ ] Шаблон для отображения платежей и их статусов
- [ ] Возможность просмотреть инфобмен 
- [ ] Возможность просмотреть callback 
- [ ] Возможность просмотреть QR код
- [ ] Возможность руками изменить статус платежа

### Integration
Интеграция с провайдером платежей
- [ ] Структура пакета
- [ ] Тесты
- [ ] Получение токена
- [ ] Регистрация платежа
- [ ] Сохранение QR кода
- [ ] Прием и обработка callback
- [ ] Опрос статуса раз в N минут по платежам по которым не пришел callback 

### Доменные сущности
- [X] Gateway
- [X] Store
- [X] User
- [X] Payment
- [X] QR
- [ ] Callback
- [ ] Logs

### Terminal
Страница на которй будет находиться форма для ввода суммы и отображен QR код для оплаты

- [ ] Страница терминала открывается по униклаьной ссылке
- [ ] Возможность ввода суммы
- [ ] Возможность отправлка данных для регистрации платежа
- [ ] Страница отображения статуса оплаты

### Logs
Логи приложения

- [X] Приложение пишет логи и регистрирует ошибки
- [ ] Логи доступны для просмотра

### Тесты и покрытие
- [ ] Слой Application 
- [ ] Слой Domain

### Рефакторинг
- [ ] Оптимизация проблемных мест в слое Presentation
- [ ] Обработка системных ошибок (дубликаты данных при записи или удаление сущностей которая имеет связи)
- [ ] Версионирование данных, что бы не было конкурентности при работы с данными
- [ ] Заменить ArrayCollection на собственную обертку
